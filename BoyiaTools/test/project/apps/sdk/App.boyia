// 应用程序类，只有一个App全局对象
class App {
    // Controller Stack
    prop controllerStack = null;
    
    // App初始化
    fun initApp() {
        this.controllerStack = new(Array);
    }
    
    // 启动一个view controller
    fun start(controllerClass) {
        var controller = new(controllerClass);
        this.controllerStack.put(controller);
        controller.init();
    }

    fun stop() {
        var size = this.controllerStack.size();
        var controller = this.controllerStack.get(size - 1);
        // 调用界面onStop回调
        controller.onStop();
        this.controllerStack.remove(size - 1);

        // 唤醒之前的页面
        var size = this.controllerStack.size();
        if (size) {
            controller = this.controllerStack.get(size - 1);
            controller.onResume();
        }
    }
}

// 应用程序默认调用initApp
App.initApp();

